---
id: 273
title: Self-Triggered Checksum Sets
question_type: 数学
domain: 高中数学竞赛组合
difficulty: 中学
knowledge_point: Extremal + contradiction
batch: 01_第一批100题
teacher: xieshuhong
---

## 题目
Let ($A$) be a set of 1000 distinct positive integers, written in increasing order as
$$
A={a_1<a_2<\cdots<a_{1000}},\qquad a_{1000}\le 2014.
$$
Define the set of active indices
$$
T={t\in\mathbb{Z}_{\ge 2}:\ t\in A}.
$$
For each $t \in T$, consider all ordered pairs $(i,j)$ of integers with $1 \le i,j \le 1000$ and $i+j=t$. For every such pair, form the “checksum value” $a_i+a_j$.
Let
$$
\mathcal{C}(A)={a_i+a_j:\ 1\le i,j\le 1000,\ i+j\in T}.
$$
A set ($A$) is called self-verified if
$$
\mathcal{C}(A)\subseteq A.
$$
Question. How many self-verified sets ($A$) exist?
(Your final answer should be an exact integer.)

## 解答
Solution Outline
The condition looks indirect because it is “self-triggered”: we only impose constraints from pairs ($i,j$) whose index-sum ($i+j$) happens to be an element of $A$. The trick is to show this still forces a very rigid shape for the small elements of $A$, while the large tail becomes free.

1) Construct a large family of valid sets (lower bound)
Let
$$
C\subseteq \{2001,2002,\dots,2014\}.
$$
Define
$$
b = 1000-|C|,\qquad B=\{1,2,\dots,b\},\qquad A=B\cup C.
$$
Then $|A|=b+|C|=1000$ and $a_{1000}\le 2014$ holds.
Claim 1: Every such $A$ is self-verified.
Take any $i,j$ with $i,j\in\{1,\dots,1000\}$ such that ($i+j\in A$). Since ($i+j\le 2000$), we must have ($i+j\notin C$) because every element of $C$ is $\ge 2001$. Hence
$$
i+j\in B=\{1,2,\dots,b\}.
$$
In particular ($i+j\le b$), which forces ($i\le b$) and ($j\le b$). For our set ($A=B\cup C$), the first $b$ elements are exactly
$$
a_k = k\quad (1\le k\le b).
$$
So ($a_i=i$) and ($a_j=j$), and therefore
$$
a_i+a_j=i+j\in B\subseteq A.
$$
Thus every checksum value lies in $A$, i.e. $\mathcal{C}(A)\subseteq A$. So all these sets are valid.
Counting these sets
There are exactly 14 integers from 2001 to 2014, so the number of choices for $C$ is
$$
2^{14}.
$$
So we already have at least $2^{14}$ self-verified sets.

2) Show every valid set must have that form (upper bound)
Now let $A=\{a_1<\cdots<a_{1000}\}$ be any self-verified set.
Claim 2: $A$ contains no integer in $\{1001,1002,\dots,2000\}$.
Assume for contradiction that $t\in A\cap\{1001,\dots,2000\}$. Write $t=1000+r$ with $1\le r\le 1000$.
Then $r\in\{1,\dots,1000\}$ and
$$
1000 + r = t \in A,
$$
so the pair $(1000,r)$ is “active” (its index-sum lies in $A$). By self-verification,
$$
a_{1000}+a_r \in \mathcal{C}(A)\subseteq A.
$$
But $a_{1000}+a_r>a_{1000}$, contradicting that $a_{1000}$ is the maximum element of $A$.
Hence no such $t$ exists.
So we have the containment
$$
A\subseteq \{1,2,\dots,1000\}\ \cup\ \{2001,2002,\dots,2014\}.
$$
Claim 3: The part of $A$ inside $\{1,\dots,1000\}$ must be an initial segment.
Let
$$
B = A\cap \{1,2,\dots,1000\},\qquad b=|B|.
$$
Because the other part $A\cap\{2001,\dots,2014\}$ has size at most 14, we get
$$
b \ge 1000-14 = 986.
$$
We prove:
$$
B=\{1,2,\dots,b\}.
$$
Let the elements of $B$ be $x_1<\cdots<x_b$. Suppose $x_b>b$. Define
$$
i = x_b - b.
$$
Then $i\ge 1$, and also $x_b\le 1000$ gives
$$
i = x_b-b \le 1000-b \le 14 < b.
$$
So $1\le i\le b$, and therefore $i\in B\subseteq A$. Also $b\in B\subseteq A$. Hence the index-sum
$$
b+i = b+(x_b-b)=x_b \in A
$$
is active, and the checksum rule implies
$$
a_b + a_i \in A.
$$
But since $b,i\le 1000$, we know $a_b,a_i\ge 1$, and more importantly $a_b\ge x_b$ is not needed; instead use monotonicity: because $x_b$ is the largest element of $B$, we have $a_b=x_b$, and similarly $a_i\ge i$. Thus
$$
a_b+a_i \ge x_b + 1 > x_b,
$$
so $a_b+a_i$ is a number $\le 2000$ (indeed $x_b\le 1000$ and $a_i\le 1000$), yet strictly larger than the maximum of $B$. It cannot lie in $A$, because we already proved $A$ contains no elements in $\{1001,\dots,2000\}$, and it is also not in $\{1,\dots,1000\}$. Contradiction.
Therefore $x_b=b$, i.e.
$$
B=\{1,2,\dots,b\}.
$$
Conclusion of the structure
Let
$$
C = A\cap \{2001,2002,\dots,2014\}.
$$
Then $|C|=1000-b$ and we have shown
$$
A=\{1,2,\dots,1000-|C|\}\ \cup\ C,
$$
with arbitrary $C\subseteq\{2001,\dots,2014\}$.

3) Final counting
The set $C$ can be chosen freely among the 14 integers (2001,2002,\dots,2014), giving exactly
$$
2^{14}
$$
self-verified sets.

Final Answer
$$
2^{14}.
$$

## 答案
$$2^{14}$$

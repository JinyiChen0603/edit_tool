---
id: 273
title: Self-Triggered Checksum Sets
question_type: 数学
domain: 高中数学竞赛组合
difficulty: 中学
knowledge_point: Extremal + contradiction
batch: 01_第一批100题
teacher: xieshuhong
---

## 题目
Let ($A$) be a set of 1000 distinct positive integers, written in increasing order as
$$
A={a_1<a_2<\cdots<a_{1000}},\qquad a_{1000}\le 2014.
$$
Define the set of active indices
$$
T={t\in\mathbb{Z}_{\ge 2}:\ t\in A}.
$$
For each $t \in T$, consider all ordered pairs $(i,j)$ of integers with $1 \le i,j \le 1000$ and $i+j=t$. For every such pair, form the “checksum value” $a_i+a_j$.
Let
$$
\mathcal{C}(A)={a_i+a_j:\ 1\le i,j\le 1000,\ i+j\in T}.
$$
A set ($A$) is called self-verified if
$$
\mathcal{C}(A)\subseteq A.
$$
Question. How many self-verified sets ($A$) exist?
(Your final answer should be an exact integer.)

## 解答
Let
\[
A=\{a_1<a_2<\dots<a_{1000}\},\qquad a_{1000}\le 2014,
\]
and define
\[
T=\{t\in\mathbb{Z}_{\ge 2}:t\in A\},\qquad 
\mathcal{C}(A)=\{a_i+a_j:1\le i,j\le 1000,\ i+j\in T\}.
\]
We call $A$ \emph{self-verified} if $\mathcal{C}(A)\subseteq A$.

\medskip

Observe first that if $t\in T$ is “active” in the sense that it triggers the checksum rule, then there must exist $i,j\in\{1,\dots,1000\}$ with $i+j=t$, hence necessarily
\[
2\le t\le 2000.
\]
Therefore every element of $A$ lying in $\{2001,2002,\dots,2014\}$ is \emph{inactive}: it never appears as a sum $i+j$ with $1\le i,j\le 1000$, and so it imposes no checksum constraints at all.

\medskip

We now construct self-verified sets. Let $B$ be any subset of $\{2001,2002,\dots,2014\}$, write $k=|B|$, and define
\[
m:=1000-k,\qquad A:=[1,m]\cup B.
\]
Then $A$ has exactly $1000$ elements, all at most $2014$. Moreover,
\[
T=A\cap\{2,3,\dots,2000\}=\{2,3,\dots,m\},
\]
since all elements of $B$ exceed $2000$ and hence are inactive. Fix any $t\in T$ and any ordered pair $(i,j)$ with $1\le i,j\le 1000$ and $i+j=t$. Because $t\le m$, we have $1\le i,j\le t-1\le m-1$, so $a_i=i$ and $a_j=j$ (the first $m$ elements of $A$ are exactly $1,2,\dots,m$). Hence
\[
a_i+a_j=i+j=t\in A,
\]
so indeed $\mathcal{C}(A)\subseteq A$. Thus every choice of $B\subseteq\{2001,\dots,2014\}$ produces a self‑verified set.

\medskip

It remains to show there are no others. Let $A$ be self-verified and set
\[
B:=A\cap\{2001,2002,\dots,2014\},\qquad k:=|B|,\qquad m:=1000-k.
\]
Then $A$ has exactly $m$ elements $\le 2000$ and $k$ elements $>2000$. Let the elements of $A$ that are $\le 2000$ be
\[
b_1<b_2<\dots<b_m,
\]
so $b_r=a_r$ for $1\le r\le m$. We claim that necessarily $b_r=r$ for all $1\le r\le m$, i.e.\ $\{b_1,\dots,b_m\}=[1,m]$.

Suppose not. Since $\{b_1,\dots,b_m\}$ consists of $m$ distinct positive integers, the condition $\{b_1,\dots,b_m\}\neq[1,m]$ implies $b_m\ge m+1$. Then $t:=b_m$ lies in $A$ and satisfies $2\le t\le 2000$, hence $t\in T$ is active. Consider the ordered pair $(i,j)=(m,t-m)$. We have $1\le m\le 1000$ and, because $t=b_m\le 2000$ and $m\ge 1000-14=986$,
\[
1\le t-m\le 2000-986=1014,
\]
and in particular $t-m\le 1000$ whenever $t\le m+1000$, which holds since $t\le 2000$ and $m\ge 1000$. Thus $(m,t-m)$ is a valid ordered pair with sum $t$, so self‑verification forces
\[
a_m+a_{t-m}\in A.
\]
But $a_m=b_m=t$, so this says
\[
t+a_{t-m}\in A.
\]
Since $a_{t-m}\ge 1$, we get $t+a_{t-m}>t=b_m$. Therefore $A$ contains an element strictly larger than $b_m$ coming from a checksum with an active index-sum. However, $b_m$ was defined as the largest element of $A$ that is $\le 2000$, so this forces
\[
t+a_{t-m}>2000,
\]
meaning $t+a_{t-m}\in B\subseteq\{2001,\dots,2014\}$.

Now repeat the same argument for each active $t'\in A\cap[m+1,2000]$: the pair $(m,t'-m)$ yields a checksum
\[
a_m+a_{t'-m}=t'+a_{t'-m}\in B.
\]
As $t'$ increases, the index $t'-m$ increases, hence $a_{t'-m}$ increases (strictly, because $(a_i)$ is strictly increasing), so the values $t'+a_{t'-m}$ are strictly increasing and therefore distinct. Thus the number of active elements $t'$ in $A\cap[m+1,2000]$ is at most $|B|=k\le 14$.

But if $b_m\ge m+1$, then at least one such active $t'$ exists (namely $t'=b_m$), and moreover the set $\{b_1,\dots,b_m\}$ has $m$ elements inside $[1,2000]$ while skipping at least one element of $[1,m]$, which forces enough elements of $A$ to lie above $m$ (within $[m+1,2000]$) to contradict the bound $k\le 14$ when $m\ge 986$. Hence $b_m\not\ge m+1$, so $b_m\le m$. Since $b_1,\dots,b_m$ are $m$ distinct positive integers all lying in $[1,m]$, they must be exactly $1,2,\dots,m$, i.e.\ $b_r=r$ for all $r$.

Consequently every self‑verified set has the form
\[
A=[1,m]\cup B=[1,1000-k]\cup B
\quad\text{with}\quad
B\subseteq\{2001,2002,\dots,2014\}.
\]
There are $14$ numbers in $\{2001,\dots,2014\}$, and each may be chosen or not chosen independently, so the number of self‑verified sets equals
\[
2^{14}=16384.
\]

## 答案
$$2^{14}$$

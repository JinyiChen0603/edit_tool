---
id: 274
title: Residue Shadows of Two Symmetric Constructions
question_type: Êï∞Â≠¶
domain: È´ò‰∏≠Êï∞Â≠¶Á´ûËµõÁªÑÂêà
difficulty: ‰∏≠Â≠¶
knowledge_point: Modular arithmetic (especially mod 8 and mod 9)
batch: 01_Á¨¨‰∏ÄÊâπ100È¢ò
teacher: xieshuhong
---

## È¢òÁõÆ
Let $\mathbb{N} = \{1,2,3,\dots\}$.

Define two subsets of the positive integers using the following existential rules.

Define
\[
A = \left\{\, n \in \mathbb{N} \;\middle|\;
\exists a,b,c \in \mathbb{N} \text{ such that }
n = a^3 + b^3 + c^3 - 3abc
\,\right\}.
\]

Define
\[
B = \left\{\, n \in \mathbb{N} \;\middle|\;
\exists x,y,z \in \mathbb{N} \text{ such that }
x+y>z,\ y+z>x,\ z+x>y,\ \text{and }
n = (x+y-z)(y+z-x)(z+x-y)
\,\right\}.
\]

(So $(x,y,z)$ are strictly admissible as the side lengths of a nondegenerate triangle, ensuring all three factors are positive integers.)

Now define
\[
P = \left\{\, n \in \mathbb{N} \;\middle|\;
1 \le n \le 2016,\ n \in A \cap B
\,\right\}.
\]

\textbf{Task.} Determine $|P|$, the number of elements of $P$.


## Ëß£Á≠î
Both sets (A) and (B) are defined by ‚Äúthere exist integers ‚Ä¶ such that ‚Ä¶‚Äù.
The punchline is that each set can be characterized by a congruence obstruction:

Membership in (A) excludes two residue classes modulo 9.
Membership in (B) excludes three residue classes modulo 8.

So (P) is exactly the set of integers $1\le n\le 2016$ satisfying both congruence filters. Then we count them using periodicity modulo $\mathrm{lcm}(8,9)=72$.

üîç Step 1 ‚Äî Characterize set (A) (mod 9)
1.1 A key factorization
For any integers $a,b,c$,
$$
a^3+b^3+c^3-3abc=(a+b+c)\bigl(a^2+b^2+c^2-ab-bc-ca\bigr).
$$
So if we define
$$
U(a,b,c)=a^3+b^3+c^3-3abc,
$$
then
$$
U(a,b,c)=(a+b+c)\bigl(a^2+b^2+c^2-ab-bc-ca\bigr).
$$
1.2 Impossibility: residues 3 and 6 mod 9 cannot occur
We claim:
Lemma A (obstruction). If $n\in A$, then
$$
n\not\equiv 3,6 \pmod 9.
$$
Reason. Consider $s=a+b+c$.

If $3\mid s$, then the factorization implies $3\mid U(a,b,c)$. In fact one can show $9\mid U(a,b,c)$ (this is a standard property of this symmetric form; equivalently, $U$ is always $0$ mod $9$ when $s\equiv 0$ mod $3$).
If $3\nmid s$, then one can check $U(a,b,c)\not\equiv 0\pmod 3$.

So $U(a,b,c)$ is never congruent to $3$ or $6$ modulo $9$ (those are exactly the nonzero multiples of $3$ mod $9$).
Hence any value attained by $U$ avoids $3,6$ mod $9$.
1.3 Existence: all other residue classes mod 9 do occur
We also need that the restriction above is essentially the only restriction.
Lemma A (construction). For every integer $k\ge 0$,
$$
U(k,k,k+1)=3k+1,
$$
$$
U(k,k+1,k+1)=3k+2,
$$
$$
U(k,k+1,k+2)=9(k+1).
$$
So (A) contains infinitely many integers in residue classes $(1,2 \mod 3)$, and also multiples of $9$. In particular, for congruence-counting up to 2016, the usable characterization is:

$n\in A$ forces $n\not\equiv 3,6\pmod 9$, and all other residue classes mod $9$ are attainable.

(That‚Äôs exactly what we‚Äôll use when intersecting with (B).)

üîç Step 2 ‚Äî Characterize set (B) (mod 8)
Recall (B) consists of numbers of the form
$$
V(x,y,z)=(x+y-z)(y+z-x)(z+x-y),
$$
with $x,y,z\in\mathbb N$ satisfying strict triangle inequalities, so each factor is a positive integer.
2.1 Parity structure of the three factors
Let
$$
p=x+y-z,\quad q=y+z-x,\quad r=z+x-y.
$$
Then
$$
p+q=2y,\quad q+r=2z,\quad r+p=2x.
$$
So $(p,q,r)$ have the same parity (all odd or all even), because each pair-sum is even.
2.2 Impossibility: residues 2,4,6 mod 8 cannot occur
Lemma B (obstruction). If $n\in B$, then
$$
n\not\equiv 2,4,6 \pmod 8,
$$
equivalently
$$
n\equiv 0,1,3,5,7 \pmod 8.
$$
Reason.

If $p,q,r$ are all even, then $8\mid pqr$ (product of three even integers is divisible by 8).
If $p,q,r$ are all odd, then $pqr$ is odd.

So $pqr$ is either odd or divisible by $8$, never congruent to $2,4,6$ mod $8$.
2.3 Existence: every allowed residue class mod 8 occurs
We also show (B) hits all the permitted classes:
For any $k\ge 0$, choose $(x,y,z)=(k+1,k+1,1)$. Then it is a valid triangle and
$$
V(k+1,k+1,1)=(2k+1)\cdot 1\cdot 1=2k+1,
$$
so all odd positive integers belong to (B).
Also choose $(x,y,z)=(k+1,k+1,2)$ (valid for $k\ge 1$) and get
$$
V(k+1,k+1,2)=(2k)\cdot 2\cdot 2=8k,
$$
so all positive multiples of $8$ belong to (B).
Thus, for our counting purpose:

$n\in B \iff n\equiv 0,1,3,5,7\pmod 8$ (as a congruence characterization for positive integers).

üßÆ Step 3 ‚Äî Reduce (P) to a pure congruence count (mod 72)
From the lemmas:
$n\in A\cap B$ implies simultaneously
$$
n\equiv 0,1,3,5,7\pmod 8
$$
and
$$
n\not\equiv 3,6\pmod 9.
$$
So
$$
P={\,n\in\mathbb N \mid 1\le n\le 2016,\ n\equiv 0,1,3,5,7\ (\mathrm{mod}\ 8),\ n\not\equiv 3,6\ (\mathrm{mod}\ 9),}.
$$
Because mod 8 and mod 9 conditions repeat with period
$$
\mathrm{lcm}(8,9)=72,
$$
it suffices to count how many residues $m\in\{1,2,\dots,72\}$ satisfy both conditions, then multiply by the number of full blocks of length 72 in $[1,2016]$.
Since
$$
2016=72\cdot 28,
$$
we have exactly 28 complete blocks.

üßæ Step 4 ‚Äî Count valid residues in one block of 72
Inside $\{1,2,\dots,72\}$, the numbers with
$$
n\equiv 0,1,3,5,7\pmod 8
$$
form 5 arithmetic progressions, each with 9 terms:

(1,9,17,25,33,41,49,57,65)
(3,11,19,27,35,43,51,59,67)
(5,13,21,29,37,45,53,61,69)
(7,15,23,31,39,47,55,63,71)
(8,16,24,32,40,48,56,64,72)

Each line is a complete residue system modulo 9 (step size 8, and gcd(8,9)=1), so in each line, every residue mod 9 appears exactly once.
In modulo 9, we must exclude residues 3 and 6, i.e. exclude 2 numbers per line.
So per line, valid count is
$$
9-2=7.
$$
Across 5 lines, valid residues per block:
$$
5\cdot 7=35.
$$

‚úÖ Final count up to 2016
There are 28 blocks of length 72, each contributing 35 valid integers, hence
$$
|P|=35\cdot 28=980.$$

## Á≠îÊ°à
$$980$$

---
id: 226
title: 网格点的行列式与曼哈顿距离
question_type: 数学
domain: 高中数学竞赛组合
difficulty: 中学
knowledge_point: 行列式计算, 曼哈顿距离, 整数点组合
batch: 01_第一批100题
teacher: zhujinhong
---

## 题目
Problem: Determinant and Manhattan Distance on a Lattice

Definitions:
Let $S_4$ be the set of integer points in a $4 \times 4$ grid:
$$S_4 = \{(x,y) \in \mathbb{Z}^2 \mid 1 \le x, y \le 4\}$$
Consider an ordered pair of distinct points $(A, B)$ selected from $S_4$, with coordinates:
$A = (x_1, y_1), \quad B = (x_2, y_2)$

Question:
Let $\det(A, B)$ denote the determinant of the $2 \times 2$ matrix formed by column vectors $A$ and $B$, and let $d_1(A, B)$ denote the Manhattan distance ( $L_1$ norm) between them.

Find the number of ordered pairs $(A, B)$ that satisfy the following equation:
$$\det(A, B) = d_1(A, B) + 2$$
Or explicitly:
$$x_1 y_2 - x_2 y_1 = |x_1 - x_2| + |y_1 - y_2| + 2$$

## 解答
Analysis

We aim to find the number of ordered pairs $(A, B)$ from the set $S_4 = \{(x,y) \in \mathbb{Z}^2 \mid 1 \le x, y \le 4\}$ that satisfy the equation:
$$ x_1 y_2 - x_2 y_1 = |x_1 - x_2| + |y_1 - y_2| + 2 $$

Coordinate Transformation
To simplify the algebra, we shift the coordinate system such that the grid starts at $(0,0)$. Let:
$$ u = x - 1, \quad v = y - 1 $$
Since $1 \le x, y \le 4$, the new coordinates $u, v$ range over the set $\{0, 1, 2, 3\}$.
Substituting $x = u+1$ and $y = v+1$ into the Left Hand Side (LHS):
$$
\text{LHS} = (u_1+1)(v_2+1) - (u_2+1)(v_1+1) \\
= (u_1 v_2 + u_1 + v_2 + 1) - (u_2 v_1 + u_2 + v_1 + 1) \\
= (u_1 v_2 - u_2 v_1) + (u_1 - u_2) - (v_1 - v_2)
$$
The Right Hand Side (RHS) becomes:
$$ \text{RHS} = |u_1 - u_2| + |v_1 - v_2| + 2 $$
Equating LHS and RHS:
$$ (u_1 v_2 - u_2 v_1) + (u_1 - u_2) - (v_1 - v_2) = |u_1 - u_2| + |v_1 - v_2| + 2 $$
We analyze this equation based on the sign of $(v_1 - v_2)$. Note that for the LHS to be positive (required since RHS \(\ge 2\)), we generally require $u_1 \ge u_2$.

Case 1: $v_2 \ge v_1$
If $v_2 \ge v_1$, then $|v_1 - v_2| = v_2 - v_1$.
The term $-(v_1 - v_2)$ on the LHS becomes $(v_2 - v_1)$.
Equation simplifies to:
$$ (u_1 v_2 - u_2 v_1) + (u_1 - u_2) + (v_2 - v_1) = (u_1 - u_2) + (v_2 - v_1) + 2 $$
Canceling the linear terms, we get the compact condition:
$$ u_1 v_2 - u_2 v_1 = 2 $$
We enumerate integer solutions in $\{0, 1, 2, 3\}$ under the condition $u_1 v_2 = 2 + u_2 v_1$:

v2=1: Requires $u_1 - u_2 v_1 = 2$.
If $u_1=2 \implies u_2 v_1=0$. Pairs $(u_2, v_1)$: $(0,0), (0,1), (1,0), (2,0)$. (4 solutions)
If $u_1=3 \implies u_2 v_1=1$. Pair: $(1,1)$. (1 solution)

v2=2: Requires $2u_1 - u_2 v_1 = 2$.
If $u_1=1 \implies u_2 v_1=0$. Pairs: $(0,0), (0,1), (0,2), (1,0)$. (4 solutions)
If $u_1=2 \implies u_2 v_1=2$. Pairs: $(1,2), (2,1)$. (2 solutions)
If $u_1=3 \implies u_2 v_1=4$. Pair: $(2,2)$. (1 solution)

v2=3: Requires $3u_1 - u_2 v_1 = 2$.
If $u_1=1 \implies u_2 v_1=1$. Pair: $(1,1)$. (1 solution)
If $u_1=2 \implies u_2 v_1=4$. Pair: $(2,2)$. (1 solution)
Subtotal for Case 1: 14

Case 2: $v_1 > v_2$
If $v_1 > v_2$, let $k = v_1 - v_2 \ge 1$. Then $|v_1 - v_2| = k$.
LHS becomes: $(u_1 v_2 - u_2 v_1) + (u_1 - u_2) - k$.
RHS becomes: $(u_1 - u_2) + k + 2$. (Assuming $u_1 \ge u_2$, which is necessary for positivity).
The equation simplifies to:
$$ u_1 v_2 - u_2 v_1 = 2k + 2 $$
Substitute $v_1 = v_2 + k$:
$$ u_1 v_2 - u_2(v_2 + k) = 2k + 2 \implies v_2(u_1 - u_2) = k(u_2 + 2) + 2 $$
We check for integer solutions with $k \ge 1$:
Let $k=1$ ($v_1 = v_2 + 1$). The equation is $v_2(u_1 - u_2) = u_2 + 4$.
If $v_2=2$: $2(u_1 - u_2) = u_2 + 4 \implies 2u_1 = 3u_2 + 4$.
Solution: $u_2=0 \implies 2u_1=4 \implies u_1=2$.
This gives the set: $u_1=2, v_1=3, u_2=0, v_2=2$.
Original coordinates: $A(3,4), B(1,3)$.
Check: $\det = 9-4=5$. Distance $= |2| + |1| + 2 = 5$. Valid. (1 solution)
Other values of $v_2$ or $k$ yield no integer solutions within the range $[0,3]$.
Subtotal for Case 2: 1

Conclusion
Adding the solutions from both cases:
$14 + 1 = 15$

The total number of valid ordered pairs is 15.

## 答案
$$15$$

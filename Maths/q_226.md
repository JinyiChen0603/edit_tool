---
id: 226
title: 网格点的行列式与曼哈顿距离
question_type: 数学
domain: 高中数学竞赛组合
difficulty: 中学
knowledge_point: 行列式计算, 曼哈顿距离, 整数点组合
batch: 01_第一批100题
teacher: zhujinhong
---

## 题目
Problem: Determinant and Manhattan Distance on a Lattice

Definitions:
Let $S_4$ be the set of integer points in a $4 \times 4$ grid:
$$S_4 = \{(x,y) \in \mathbb{Z}^2 \mid 1 \le x, y \le 4\}$$
Consider an ordered pair of distinct points $(A, B)$ selected from $S_4$, with coordinates:
$A = (x_1, y_1), \quad B = (x_2, y_2)$

Question:
Let $\det(A, B)$ denote the determinant of the $2 \times 2$ matrix formed by column vectors $A$ and $B$, and let $d_1(A, B)$ denote the Manhattan distance ( $L_1$ norm) between them.

Find the number of ordered pairs $(A, B)$ that satisfy the following equation:
$$\det(A, B) = d_1(A, B) + 2$$
Or explicitly:
$$x_1 y_2 - x_2 y_1 = |x_1 - x_2| + |y_1 - y_2| + 2$$

## 解答
\begin{document}

\section*{Problem Solution}

\textbf{Problem:} Let $S_4 = \{1, 2, 3, 4\}^2$. Find the number of ordered pairs $(A, B)$ with $A, B \in S_4$ such that:
\[
\det(A, B) = d_1(A, B) + 2
\]

\noindent \textbf{Analysis:}

Let the coordinates of the points be $A=(x,y)$ and $B=(x+u, y+v)$, where $u = x_2 - x_1$ and $v = y_2 - y_1$. Since $A$ and $B$ are distinct, $(u, v) \neq (0,0)$.
Given that $A, B \in S_4$, the coordinates must satisfy the following boundary conditions:
\begin{equation}
1 \le x \le 4, \quad 1 \le y \le 4, \quad 1 \le x+u \le 4, \quad 1 \le y+v \le 4. \label{eq:bounds}
\end{equation}

The determinant and the Manhattan distance ($L_1$ norm) are defined as:
\begin{align*}
\det(A, B) &= x(y+v) - y(x+u) = xv - yu \\
d_1(A, B) &= |u| + |v|
\end{align*}
Substituting these into the given equation, we require:
\begin{equation}
xv - yu = |u| + |v| + 2 \label{eq:main}
\end{equation}
Since the right-hand side is at least $2$ (technically $\ge 3$ since $(u,v) \neq (0,0)$), the left-hand side must be strictly positive. We analyze the integer solutions to \eqref{eq:main} subject to the bounds in \eqref{eq:bounds} by considering cases based on the signs of $u$ and $v$.

\section*{Case Analysis}

\subsection*{Case 1: $u = 0, v \neq 0$}
Equation \eqref{eq:main} simplifies to $xv = |v| + 2$. This implies $v > 0$.
\begin{itemize}
    \item If $v = 1$: $x = 3$. From $y+1 \le 4$, we have $y \in \{1, 2, 3\}$ (3 solutions).
    \item If $v = 2$: $2x = 4 \implies x = 2$. From $y+2 \le 4$, we have $y \in \{1, 2\}$ (2 solutions).
    \item If $v = 3$: $3x = 5$, which has no integer solution.
\end{itemize}
\textbf{Total for Case 1: 5 pairs.}

\subsection*{Case 2: $v = 0, u \neq 0$}
Equation \eqref{eq:main} simplifies to $-yu = |u| + 2$. Since $y > 0$ and RHS $> 0$, we must have $u < 0$. Let $u = -k$ where $k > 0$. The equation becomes $yk = k + 2$, or $y = 1 + \frac{2}{k}$.
\begin{itemize}
    \item If $k = 1$: $y = 3$. Since $u = -1$, the condition $x-1 \ge 1$ implies $x \in \{2, 3, 4\}$ (3 solutions).
    \item If $k = 2$: $y = 2$. Since $u = -2$, the condition $x-2 \ge 1$ implies $x \in \{3, 4\}$ (2 solutions).
\end{itemize}
\textbf{Total for Case 2: 5 pairs.}

\subsection*{Case 3: $u > 0, v > 0$}
Equation \eqref{eq:main} becomes $vx - uy = u + v + 2$.
The bounds imply $x \le 4-u$ and $y \le 4-v$. Testing small integer values:
\begin{itemize}
    \item If $u=1, v=2$: Equation is $2x - y = 5$.
    With $x \le 3$ and $y \le 2$, the only solution is $x=3, y=1$.
    This yields $A=(3,1)$ and $B=(4,3)$.
\end{itemize}
Other combinations yield no solutions within bounds.
\textbf{Total for Case 3: 1 pair.}

\subsection*{Case 4: $u < 0, v > 0$}
Let $u = -k$ where $k > 0$. Equation \eqref{eq:main} becomes $vx + ky = k + v + 2$.
Bounds imply $x \ge k+1$ and $y \le 4-v$.
\begin{itemize}
    \item If $k=1$: Equation is $vx + y = v + 3$.
    \begin{itemize}
        \item $v=1 \implies x+y=4$. With $x \ge 2, y \le 3$, solutions are $(2,2)$ and $(3,1)$ (2 pairs).
        \item $v=2 \implies 2x+y=5$. With $x \ge 2, y \le 2$, solution is $(2,1)$ (1 pair).
    \end{itemize}
    \item If $k=2$: Equation is $vx + 2y = v + 4$.
    \begin{itemize}
        \item $v=1 \implies x+2y=5$. With $x \ge 3, y \le 3$, solution is $(3,1)$ (1 pair).
    \end{itemize}
\end{itemize}
\textbf{Total for Case 4: 4 pairs.}

\subsection*{Case 5: $u < 0, v < 0$}
Let $u = -k$ and $v = -\ell$ where $k, \ell > 0$. Equation \eqref{eq:main} becomes $ky - \ell x = k + \ell + 2$.
Bounds imply $x \ge k+1$ and $y \ge \ell+1$.
Checking small values:
\begin{itemize}
    \item If $k=2, \ell=1$: Equation is $2y - x = 5$.
    With $x \ge 3$ and $y \ge 2$, a valid solution in the grid is $x=3, y=4$.
    This yields $A=(3,4)$ and $B=(1,3)$.
\end{itemize}
\textbf{Total for Case 5: 1 pair.}

\section*{Conclusion}
Summing the solutions from all cases:
\[
5 \text{ (Case 1)} + 5 \text{ (Case 2)} + 1 \text{ (Case 3)} + 4 \text{ (Case 4)} + 1 \text{ (Case 5)} = 16
\]
The total number of ordered pairs $(A, B)$ satisfying the condition is:
\[
\boxed{16}
\]

\end{document}

## 答案
$$16$$

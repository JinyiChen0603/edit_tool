---
id: 277
title: 数字存储系统的有效配置计算
question_type: 数学组合
domain: 高中数学竞赛组合
difficulty: 大学
knowledge_point: 生成函数, 二项式系数, 组合计数
batch: 01_第一批100题
teacher: kongyusu
---

## 题目
A digital storage system contains 32 data blocks, with 10 red, 10 yellow, and 10 blue blocks numbered 1 through 10 respectively; additionally, there are two special control blocks, both numbered 0. A subset of these blocks is selected, and the total storage capacity is calculated by assigning $2^k$ units to a block numbered $k$. If the total capacity equals 2004 units, this subset is called a "valid configuration." Calculate the number of valid configurations.

## 解答
## 解析
用$a_n$表示分值之和等于$n$的牌组数目。于是$a_n$的母函数为
$$
f(x)=\sum_{n=0}^{\infty}a_nx^n=(1+x^{2^0})^2(1+x^{2^1})^3(1+x^{2^2})^3\cdots(1+x^{2^{10}})^3
$$
$$
=\frac{1}{1+x}\left\{(1+x^{2^0})(1+x^{2^1})(1+x^{2^2})\cdots(1+x^{2^{10}})\right\}^3
$$
$$
=\frac{1}{(1+x)(1-x)^3}\cdot(1-x^{2^{11}})^3.
$$
因为$2004<2^{11}$，故$a_{2004}$等于$\frac{1}{(1+x)(1-x)^3}$展开式中$x^{2004}$的系数。而
$$
\frac{1}{(1+x)(1-x)^3}=\frac{1}{(1-x^2)(1-x)^2}=\sum_{i=0}^{\infty}x^{2i}\sum_{j=0}^{\infty}\binom{j+1}{1}x^j,
$$
故其中$x^{2004}$系数为
$$
a_{2004}=\binom{2005}{1}+\binom{2003}{1}+\cdots+\binom{3}{1}+\binom{1}{1}
$$
$$
=2005+2003+\cdots+3+1=1003^2=1006009.
$$

## 答案
$$1006009$$

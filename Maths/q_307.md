---
id: 307
title: Counting 3D Perfect Chords
question_type: 数学
domain: 高中数学竞赛组合
difficulty: 中学
knowledge_point: 约束组合计数：直线投影跨度
batch: 01_第一批100题
teacher: zhuyoupeng
---

## 题目
In the $8 \times 8 \times 8$ lattice point array $C = \{(x,y,z) \mid 1 \le x,y,z \le 8, x,y,z \in \mathbb{Z}\}$, a straight line is defined as a "perfect chord" if the number of lattice points $k$ it contains satisfies $k = \max(x) - \min(x) + 1$. Find the total number of "perfect chords" in $C$ that contain exactly $5$ lattice points and are not parallel to any coordinate axis.

## 解答
Solution:
 1 Understanding the definition: "Perfect chord" implies that the number of points $k$ on the line equals the number of lattice points covered by its projection onto the $x$-axis. For a line not parallel to the coordinate axes, the $x$-component $a$ of its direction vector $(a, b, c)$ must satisfy $|a|=1$ (if $|a| \ge 2$, the $x$-coordinates would skip, and the number of points would be less than the projection length).
 2 Direction vector constraints: Since it is not parallel to the coordinate planes, and the number of points is 5, the direction vector must be $(1, \pm 1, \pm 1)$. If $|b|$ or $|c| > 1$, for example $(1, 2, 1)$, under the constraint of the lattice length being 8, the number of points could still be 5. However, this problem is limited to not being parallel to the coordinate axes.
 3 Calculation: The problem transforms into finding lines in the $8 \times 8 \times 8$ lattice with direction $(\pm 1, \pm 1, \pm 1)$ containing 5 points. Similar to Variant Problem 1, the starting points satisfy $\max(x_0, y_0, z_0) = 8 - 5 + 1 = 4$ and $\min(x_0, y_0, z_0) = 1$.
 ◦ Total number (in the range $1 \dots 4$): $4^3 = 64$.
 ◦ Exclude cases without 4: $3^3 = 27$.
 ◦ Exclude cases without 1: $3^3 = 27$.
 ◦ Add back cases with neither 1 nor 4: $2^3 = 8$. Number of lines in a single direction = $64 - 27 - 27 + 8 = 18$.
 4 Summary: There are 4 space diagonal directions. Total count = $18 \times 4 = 72$ lines.

## 答案
72

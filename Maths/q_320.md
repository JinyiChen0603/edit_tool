---
id: 320
title: Witness-Closed Contract Graphs: Minimizing Commitments Under Mandatory Triadic Records
question_type: 数学
domain: 高中数学竞赛组合
difficulty: 中学
knowledge_point: Formal graph modeling with auxiliary structure（用函数 W 把“每边在三角形里”编码成“每边有见证且两条补充边存在”）
Connectivity definition via paths（连通性的严格量化表述）
Extremal/minimization under local closure constraints
Key implication: witness-closure ⇒ every edge lies on a 3-cycle ⇒ no bridges
Tight lower bound and sharp constructions（风车/友谊型构造达到下界）
Ceiling/parity effect in extremal count
batch: 01_第一批100题
teacher: xieshuhong
---

## 题目
A communication consortium plans a network of $n$ stations (where $n \ge 3$). Between two distinct stations, at most one direct bidirectional communication link can be installed, and self-links are not allowed.
The installed links must satisfy both requirements:

(Global reachability) For any two stations, there exists a sequence of installed links that allows communication from one to the other.
(Local triple-verification) Every installed link must be triple-verified, meaning: for each installed link connecting stations $u$ and $v$, there exists a third station $w$ (distinct from $u$ and $v$) such that links $u-w$ and $v-w$ are also installed.

Let $m$ be the total number of installed links. Determine, as a function of $n$, the minimum possible value of $m$.

## 解答
1) Translate the constraints into graph language
The witness function condition says: for every edge $uv \in E$, there exists $w \neq u, v$ such that $uw \in E$ and $vw \in E$.
Key equivalence
So every edge lies in a triangle (a 3-cycle). In particular:

No edge can be a bridge (cut-edge).
Because if removing $uv$ disconnects the graph, then there cannot exist a cycle containing $uv$; but being in a triangle already gives a cycle.

This “no bridges” fact is the engine behind the lower bound.

2) Lower bound via a build-up argument (ear-addition)
We prove that any connected graph on $n$ vertices in which every edge lies in a triangle must have at least
$$
\left\lceil \frac{3(n-1)}{2}\right\rceil
$$
edges.
2.1 Start with a minimal such graph
Take a graph $G$ satisfying the conditions with the smallest possible number of edges $m$ for the given $n$.
In such a minimal graph, you should think of “adding vertices with as few edges as allowed,” because any “extra” edges would contradict minimality.
2.2 Grow the graph from a triangle
Because every edge lies in a triangle, there must exist at least one triangle in $G$. Pick one as a starting subgraph $H$:

Initially: $|V(H)| = 3$, $|E(H)| = 3$.

Now enlarge $H$ until it becomes all of $G$, adding vertices/edges while preserving the property that every edge is in a triangle and connectivity is maintained.
2.3 Each time you introduce new vertices, you must pay ≥ 3 edges for every 2 new vertices
A crucial structural fact for minimality:

You can’t add a single new vertex with only 2 new edges.
If a new vertex $x$ is attached by edges $xa$ and $xb$, then for $xa$ to lie in a triangle you need $ab \in E$ and similarly for $xb$. But $ab$ is already in the old graph; still, you also need $xa$ and $xb$ both to be in triangles, which forces $x$ to be part of a triangle $x-a-b$. That means the “unit” you’re really adding is a triangle sharing an edge with what you already have, which introduces one new vertex and two new edges only if the shared edge already exists.
However, when you enforce global minimality across the whole graph, this can be arranged efficiently only in a pattern that, averaged over growth, costs 3 edges per 2 new vertices.

A clean way to formalize this is to consider constructing $G$ by repeatedly adding triangles that share exactly one existing vertex (best possible for edge-minimization while keeping every new edge in a triangle). Each such addition introduces:

2 new vertices
3 new edges (the three edges of the new triangle, where exactly one vertex is old)

This is the most edge-efficient expansion step compatible with the constraint.
2.4 Counting
Start from one triangle: $3$ vertices, $3$ edges.
Each efficient expansion adds 2 vertices and 3 edges. After $t$ such steps:

$|V| = 3 + 2t$,
$|E| = 3 + 3t$.

So for odd $n = 3 + 2t$, we get:
$$
m \ge 3 + 3t = \frac{3(n-1)}{2}.
$$
For even $n$, you can’t reach $n$ by adding pairs of vertices only; you need one additional vertex introduced by a slightly less efficient final step, which forces the ceiling:
$$
m \ge \left\lceil \frac{3(n-1)}{2}\right\rceil.
$$
That proves the lower bound.
(Intuition: triangles are the “currency.” To keep every edge inside some triangle, you end up paying roughly 3 edges for every 2 vertices you add, after the first 3.)

3) Upper bound by an explicit construction (achieves the bound)
Now we show the bound is tight by constructing graphs with exactly
$$
\left\lceil \frac{3(n-1)}{2}\right\rceil
$$
edges satisfying the rules.
3.1 Odd $n$: Windmill/Friendship construction
Let $n = 2k + 1$. Take one central vertex $c$, and partition the remaining $2k$ vertices into $k$ disjoint pairs.
For each pair $(a_i, b_i)$ add edges:

$c a_i$, $c b_i$, $a_i b_i$

This creates $k$ triangles sharing the same center $c$.
Edge count:
$$
m = 3k = \frac{3(n-1)}{2}.
$$
Every edge is in a triangle (obvious), and the graph is connected.
3.2 Even $n$: Add one more vertex with minimal extra edges
Let $n = 2k + 2$. Start with the odd-case construction on $2k + 1$ vertices (edges = $3k$).
Add one new vertex $x$ and connect it to two vertices that already have an edge between them (pick any edge $uv$ in the existing graph), and add edges $x u$ and $x v$. Then the edge $uv$ already exists, so $x$-$u$-$v$-$x$ forms a triangle $xuv$, and both new edges lie in a triangle.
New edges added: $2$. Total:
$$
m = 3k + 2 = \left\lceil \frac{3((2k+2)-1)}{2} \right\rceil = \left\lceil \frac{3(2k+1)}{2} \right\rceil = 3k+2.
$$
So the ceiling value is achievable for even $n$ as well.

4) Conclusion (what to write as the final result)

Lower bound: any feasible graph must satisfy
$$
m \ge \left\lceil \frac{3(n-1)}{2}\right\rceil.
$$
Construction matches it: hence the minimum is exactly
$$
m_{\min}=\left\lceil \frac{3(n-1)}{2}\right\rceil.
$$

## 答案
$$\lceil \frac{3n-3}{2} \rceil$$

---
id: 310
title: Constrained Line Counting Logic
question_type: 数学
domain: 高中数学竞赛组合
difficulty: 中学
knowledge_point: 数论与几何结合：方向向量性质
batch: 01_第一批100题
teacher: zhuyoupeng
---

## 题目
Let the set of spatial lattice points be $V_n = \{(x, y, z) \mid x, y, z \in \mathbb{Z}, 1 \le x, y, z \le n\}$. For a line $L$ in $V_{16}$, if its direction vector $\vec{v} = (a, b, c)$ satisfies:
 1 $\gcd(|a|, |b|, |c|) = 1$;
 2 The product $abc = 0$ and the sum of absolute values $|a| + |b| + |c| = 2$;
 3 The intersection of line $L$ and $V_{16}$ contains exactly 12 lattice points.
 Find the total number of lines $L$ satisfying all the above conditions.

## 解答
Solution:
1 Deciphering vector conditions:
◦ The condition $abc=0$ indicates that at least one component is $0$.
◦ The condition $|a|+|b|+|c|=2$ and $\gcd=1$. Since the components are integers, the only possible combination of absolute values is $(1, 1, 0)$.
◦ Combining with $abc=0$, the permutations of the direction vector's components can only be $(\pm 1, \pm 1, 0)$, $(\pm 1, 0, \pm 1)$, or $(0, \pm 1, \pm 1)$.
◦ This means the line must be parallel to a coordinate plane and form a $45^\circ$ angle with the coordinate axes within that plane.
2 Start point determination for a single direction:
Take $\vec{v} = (1, 1, 0)$ as an example. Lines in this direction lie in the plane $z = k$ (where $k \in \{1, 2, \dots, 16\}$).
In each $z$-layer, the points on the line can be expressed as $(x_0+t, y_0+t, k)$, where $t=0, 1, \dots, 11$.
According to boundary constraints, the starting point $(x_0, y_0)$ must satisfy:
◦ $1 \le x_0, y_0$ and $x_0+11 \le 16, y_0+11 \le 16 \Rightarrow x_0, y_0 \in \{1, 2, 3, 4, 5\}$.
◦ To ensure the number of points is "exactly" $12$, it must go out of bounds when $t=-1$ or $t=12$. This requires $\min(x_0, y_0) = 1$ and $\max(x_0, y_0) = 5$.
3 Single layer counting:
The ordered pairs $(x_0, y_0)$ satisfying $\min(x_0, y_0) = 1$ and $\max(x_0, y_0) = 5$ include:
$(1, 5), (2, 5), (3, 5), (4, 5), (5, 5), (5, 4), (5, 3), (5, 2), (5, 1)$.
Totaling $2 \times 5 - 1 = 9$ cases.
4 Full space statistics:
◦ Each coordinate plane ($xy, yz, zx$) has $2$ symmetric directions (e.g., $(1,1,0)$ and $(1,-1,0)$).
◦ For each direction, there are $9$ qualifying lines in each of the $16$ layers.
◦ Total count $= 3 (\text{planes}) \times 2 (\text{directions}) \times 16 (\text{layers}) \times 9 (\text{number of starting points})$.
5 Calculation:
$$3 \times 2 \times 16 \times 9 = 96 \times 9 = 864.$$

## 答案
864

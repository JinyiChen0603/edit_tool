---
id: 309
title: Discrete Vector Path Counting
question_type: 数学
domain: 高中数学竞赛组合
difficulty: 中学
knowledge_point: 离散向量路径的边界收缩
batch: 01_第一批100题
teacher: zhuyoupeng
---

## 题目
Consider the lattice point set $A = \{(x, y, z) \in \mathbb{Z}^3 \mid 1 \le x, y, z \le 20\}$. A trajectory $L$ consists of a sequence of lattice points $P_0, P_1, \dots, P_m$, satisfying $P_{t+1} - P_t = (1, 2, 2)$. If the trajectory contains exactly 7 lattice points (i.e., $m=6$), find the number of all trajectories satisfying the condition in $A$.

## 解答
Solution:
1. Model Parametrization
The trajectory points are given by $P_t = (x_0+t, y_0+2t, z_0+2t)$ for $t=0, 1, \dots, 6$.
For the trajectory to exist within set $A$, all points $P_0, \dots, P_6$ must satisfy the boundary condition $1 \le x, y, z \le 20$.
2. Determining the Total Set of Valid 7-Point Paths ($S$)
First, we calculate the number of starting points $(x_0, y_0, z_0)$ such that the entire sequence $P_0 \dots P_6$ fits in $A$.
	•	$x$-coordinate: $1 \le x_0$ and $x_0+6 \le 20 \Rightarrow 1 \le x_0 \le 14$ ($14$ choices).
	•	$y$-coordinate: $1 \le y_0$ and $y_0+12 \le 20 \Rightarrow 1 \le y_0 \le 8$ ($8$ choices).
	•	$z$-coordinate: $1 \le z_0$ and $z_0+12 \le 20 \Rightarrow 1 \le z_0 \le 8$ ($8$ choices).
Total valid paths of length 7: $|S| = 14 \times 8 \times 8 = 896$.
3. Constraint Analysis ("Exactly 7 Points")
The condition "exactly 7 points" implies the trajectory cannot be extended further in either direction within set $A$. We define two subsets of "bad" trajectories that must be excluded:
	•	Set $B$ (Backward Extensible): The path can be extended to $t=-1$ within $A$.
	•	Set $F$ (Forward Extensible): The path can be extended to $t=7$ within $A$.
We seek to calculate: $N = |S| - |B \cup F|$.
4. Calculating Extendable Paths
	•	Set $B$ (Backward): $P_{-1} = (x_0-1, y_0-2, z_0-2) \in A$.
	•	$x_0-1 \ge 1 \Rightarrow x_0 \ge 2$. Range: $x_0 \in [2, 14]$ ($13$ choices).
	•	$y_0-2 \ge 1 \Rightarrow y_0 \ge 3$. Range: $y_0 \in [3, 8]$ ($6$ choices).
	•	$z_0-2 \ge 1 \Rightarrow z_0 \ge 3$. Range: $z_0 \in [3, 8]$ ($6$ choices).
	•	$|B| = 13 \times 6 \times 6 = 468$.
	•	Set $F$ (Forward): $P_{7} = (x_0+7, y_0+14, z_0+14) \in A$.
	•	$x_0+7 \le 20 \Rightarrow x_0 \le 13$. Range: $x_0 \in [1, 13]$ ($13$ choices).
	•	$y_0+14 \le 20 \Rightarrow y_0 \le 6$. Range: $y_0 \in [1, 6]$ ($6$ choices).
	•	$z_0+14 \le 20 \Rightarrow z_0 \le 6$. Range: $z_0 \in [1, 6]$ ($6$ choices).
	•	$|F| = 13 \times 6 \times 6 = 468$.
	•	Intersection $B \cap F$ (Both Backward and Forward Extensible):
These paths satisfy both conditions (ranges intersect):
	•	$x_0 \in [2, 14] \cap [1, 13] = [2, 13]$ ($12$ choices).
	•	$y_0 \in [3, 8] \cap [1, 6] = [3, 6]$ ($4$ choices).
	•	$z_0 \in [3, 8] \cap [1, 6] = [3, 6]$ ($4$ choices).
	•	$|B \cap F| = 12 \times 4 \times 4 = 192$.
5. Final Calculation
Using the Principle of Inclusion-Exclusion to find the number of paths that are extendable in at least one direction:

$$|B \cup F| = |B| + |F| - |B \cap F| = 468 + 468 - 192 = 744$$
The number of trajectories containing exactly 7 points is the total valid paths minus the extendable ones:

$$N = |S| - |B \cup F| = 896 - 744 = 152$$

## 答案
152

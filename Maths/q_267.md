---
id: 267
title: The Single-Handshake Quartets in a Binary-Verified Symposium
question_type: 数学
domain: 高中数学竞赛组合
difficulty: 中学
knowledge_point: Graph modeling (simple undirected graph from pairwise relations)
Extremal graph theory / optimization under combinatorial constraints
Counting induced subgraphs (4-vertex subsets inducing exactly one edge, i.e., “$K_2 + 2K_1$”)
Structure of extremal graphs (balancing component sizes; disjoint union of cliques is extremal in this problem)
Double counting & convexity/majorization ideas (why “balanced partitions” maximize counts)
batch: 01_第一批100题
teacher: xieshuhong
---

## 题目
At a research symposium there are exactly 120 participants. For every unordered pair of distinct participants ($\{u,v\}$), a secure audit produces a binary outcome $A(u,v)\in\{0,1\}$. The audit satisfies:

Symmetry: $A(u,v)=A(v,u)$.
No self-pairs are audited: $A(u,u)$ is undefined.
The outcomes are fixed (no randomness) and consistent across the symposium.

Interpret $A(u,v)=1$ as “the pair $\{u,v\}$ is verified compatible”, and $A(u,v)=0$ as “not verified compatible”.
A set ($S$) of four distinct participants is called a fragile quartet if, among the six unordered pairs inside ($S$), exactly one pair is verified compatible (i.e., exactly one pair $\{u,v\}\subset S$ has $A(u,v)=1$).
Let $F$ be the number of fragile quartets.
Question. What is the maximum possible value of $F$ over all audit outcomes $A$ satisfying the rules above?
Your final answer should be a single integer.

## 解答
Problem restatement in graph language
Model the 120 participants as vertices of a simple undirected graph $G$. Put an edge $uv$ iff $A(u,v)=1$.
A 4-set $S$ is a fragile quartet iff the induced subgraph $G[S]$ contains exactly one edge. Denote by $F(G)$ the number of such 4-sets. We want:

maximize $F(G)$ over all graphs $G$ on 120 vertices.

Equivalently, we count induced copies of the 4-vertex graph $K_2 \sqcup 2K_1$.

1) Symmetrization: reducing to a union of cliques

Clone operation (copying neighborhoods)
Pick two distinct vertices $x$ and $y$. Define a new graph $G'$ by replacing the adjacency pattern of $y$ (to all other vertices) with that of $x$, while keeping everything else unchanged. Concretely, for every $z\neq x,y$,

$yz$ is an edge in $G'$ iff $xz$ is an edge in $G$.
all edges not incident to $y$ remain as in $G$.

Similarly define $G''$ by copying $y$’s neighborhood onto $x$.
Key inequality (the “do not decrease” step)
One shows (by partitioning fragile quartets according to whether they contain $x$, contain $y$, contain neither, etc.) that:
$$ F(G)\le \frac{F(G')+F(G'')}{2}. $$
So at least one of $G',G''$ satisfies $F(\cdot)\ge F(G)$. Therefore, there exists an extremal graph (a maximizer of $F$) that is stable under repeated cloning operations.
End structure after repeated cloning
If we repeatedly apply cloning to pairs of vertices that do not have identical neighborhoods, we can drive the graph into a highly symmetric form. In the extremal limit, vertices fall into classes with identical neighborhoods; and the cloning stability forces that between any two classes, adjacency is “all or nothing”.
In this problem (counting induced $K_2\sqcup 2K_1$), the extremal outcome is:

the graph can be taken to be a disjoint union of complete graphs (cliques).

So it suffices to maximize $F$ among graphs of the form:

$G = K_{a_1}\sqcup K_{a_2}\sqcup \cdots \sqcup K_{a_t}$,
where $a_1+\cdots+a_t=120$, each $a_i\ge 1$,
and there are no edges between different cliques.



2) Counting fragile quartets in a union of cliques
Let the clique sizes be $a_1,\dots,a_t$.
A 4-set induces exactly one edge iff:

the two endpoints of that edge come from the same clique $i$ (choose 2 vertices in it);
the other two vertices must be isolated in the induced subgraph, so they cannot come from the same clique (else they would be adjacent), and cannot come from clique $i$ (else they connect to the edge endpoints).
Thus they must be chosen from two distinct cliques $j,k\neq i$, one vertex from each.

So the count is:
$$
F(G)=\sum_{i=1}^t \binom{a_i}{2}\cdot \sum_{\substack{j<k \\ j\neq i,\ k\neq i}} a_j a_k.
$$
It is often convenient to rewrite the inner sum using:
$$
\sum_{\substack{j<k \\ j\neq i,\ k\neq i}} a_j a_k
=\frac{1}{2}\left(\left(\sum_{j\neq i}a_j\right)^2-\sum_{j\neq i}a_j^2\right).
$$

3) For fixed number of cliques (t): balancing maximizes $F$
Now fix $t$. We optimize over integers $a_i\ge 1$ with $\sum a_i=120$.
Smoothing argument (why sizes should be as equal as possible)
Take two parts $a_p,a_q$ with $a_p\ge a_q+2$. Consider replacing them by $(a_p-1,a_q+1)$ (keeping all other $a_i$ unchanged). One can compute the change in $F$ as a quadratic function of the moved unit, and show it increases $F$ unless the sizes differ by at most 1.
Therefore, for each fixed $t$, $F$ is maximized when:

all $a_i$ are equal, or differ by at most 1.

In particular, when $t\mid 120$, the maximum for that $t$ occurs at:
$$
a_1=\cdots=a_t=\frac{120}{t}.
$$

4) Evaluate the balanced case and optimize over $t$
Assume $t\mid 120$ and all $a_i=m=120/t$. Then for each $i$:

$\binom{a_i}{2}=\binom{m}{2}$,
among the remaining $t-1$ cliques, choosing two distinct cliques and one vertex from each gives:
$$
\sum_{\substack{j<k \\ j\neq i,\ k\neq i}} a_j a_k=\binom{t-1}{2}m^2.
$$

So:
$$
F(t)=t\cdot \binom{m}{2}\cdot \binom{t-1}{2}m^2, \quad m=\frac{120}{t}.
$$
Plug in $\binom{m}{2}= \frac{m(m-1)}{2}$ and $\binom{t-1}{2}=\frac{(t-1)(t-2)}{2}$:
$$
F(t)= t \cdot \frac{m(m-1)}{2} \cdot \frac{(t-1)(t-2)}{2} \cdot m^2
= \frac{t(t-1)(t-2)}{4} \, m^3 (m-1).
$$

With $m=120/t$:
$$
F(t)= \frac{t(t-1)(t-2)}{4}\left(\frac{120}{t}\right)^3\left(\frac{120}{t}-1\right)
= \frac{120^3}{4}\cdot \frac{(t-1)(t-2)}{t^2}\left(\frac{120}{t}-1\right).
$$

Now compare integer values of $t$ (and when $t\nmid120$, the “sizes differ by at most 1” case gives a slightly smaller value than the nearest divisible balanced case; the original solution shows the global max occurs at a divisible case).
The maximum occurs at:

$t=5$, $m=24$, i.e. $G = 5K_{24}$.

Final computation for $t=5$, $m=24$
For each chosen clique $i$:

number of ways to pick the unique edge: $\binom{24}{2}=276$.
choose the other two vertices from two distinct other cliques: among 4 remaining cliques, choose 2 and pick 1 vertex from each:
$$ \binom{4}{2}\cdot 24^2 = 6\cdot 576=3456. $$

Multiply and then multiply by 5 choices of $i$:
$$ F_{\max}=5\cdot 276\cdot 3456. $$
Compute:
$276\cdot 3456 = 953856$,
$5\cdot 953{,}856 = 4{,}769{,}280$.

So:
$$
F_{\max}=4{,}769{,}280.
$$

Takeaway (structure of the extremal configuration)
The maximum number of fragile quartets is achieved when the 120 participants split into five groups of 24, such that:

- all pairs within a group are verified compatible ($A=1$),
- all pairs across groups are not verified compatible ($A=0$).

This produces:

exactly one compatible pair in a fragile quartet by taking the compatible pair from one group and the two isolated vertices from two other distinct groups.

Maximum ($F = 4{,}769{,}280$).

## 答案
$$4769280$$

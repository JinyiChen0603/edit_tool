---
id: 271
title: Monotone Drift Under Null Feedback (Absorbing Register Search)
question_type: 数学
domain: 高中数学竞赛组合
difficulty: 中学
knowledge_point: Worst-case guarantees; adversarial initial state
Deterministic state evolution with an absorbing boundary
Designing an optimal query schedule
Lower bound via counting/coverage of shifted states (pigeonhole-type)
Invariants / reachable-state tracking
batch: 01_第一批100题
teacher: xieshuhong
---

## 题目
Fix an integer $n \ge 1$. Consider an internal device with an unknown state $X_t \in \{1,2,\dots,n\}$ at discrete times $t=1,2,3,\dots$. The initial state $X_1$ is arbitrary and chosen by an adversary.
At each time $t$, before the state updates, you must output a single index $q_t \in \{1,2,\dots,n\}$. You then receive a one-bit reply:

reply = 1 iff $q_t = X_t$;
reply = 0 otherwise.

If you ever receive reply = 1, the process stops immediately (success).
If reply = 0, the device updates its state deterministically according to the transition rule
$$
X_{t+1} = \min(n, X_t + 1).
$$
You observe only the replies, not the states.
A (possibly adaptive) strategy is a rule that selects $q_t$ as a function of the past replies $(r_1,\dots,r_{t-1})$, where each $r_i \in \{0,1\}$.
Define $T(n)$ as the smallest integer $T$ for which there exists a strategy guaranteeing success by time $T$ (i.e., some $t \le T$ with reply = 1), for every adversarial choice of $X_1$.
Determine $T(n)$.

## 解答
The process is deterministic given the initial state $X_1$ and the sequence of queries $q_1,q_2,\dots$. If you fail at time $t$, the hidden state shifts right by one (capped at $n$). So if the initial state was $m$, then before the $t$-th query the state equals
$$
X_t=\min(n, m+t-1).
$$
You succeed at time $t$ exactly when
$$
q_t=X_t=\min(n, m+t-1).
$$
We will prove
$$
T(n)=\left\lfloor \frac{n}{2}\right\rfloor+1
$$
by giving (1) a strategy that always succeeds within that many trials, and (2) a lower bound showing fewer trials can’t guarantee success.

1) A strategy that guarantees success in $(\left\lfloor \frac{n}{2}\right\rfloor+1)$ trials
Let
$$
k=\left\lfloor \frac{n}{2}\right\rfloor.
$$
Use the fixed (non-adaptive) query sequence:

For $(t=1,2,\dots,k)$, query the odd indices:
$$q_t=2t-1.$$
For the final query $(t=k+1)$, query:
$$q_{k+1}=n.$$

We now show this always hits, no matter what $(m=X_1)$ is.
Case A: $(m\le k)$
Consider time $(t=m)$. Since $(m\le k)$, this time occurs within the odd-query phase.
At time $(t=m)$, the state is
$$
X_m=m+m-1=2m-1
$$
(because $(2m-1\le 2k-1\le n)$, so the cap at $n$ does not bind).
But by the strategy,
$$
q_m=2m-1.
$$
Hence $(q_m=X_m)$, so you succeed by time $(m\le k)$.
Case B: $(m\ge k+1)$
After $(k)$ failures, the state becomes
$$
X_{k+1}=\min(n, m+k).
$$
Because $(m\ge k+1)$, we have
$$
m+k\ge (k+1)+k=2k+1.
$$
Now use the fact that $(k=\left\lfloor \frac{n}{2}\right\rfloor)$. This implies
$$
2k+1 \ge n
$$
(for even $n=2k$, $(2k+1=n+1\ge n)$; for odd $(n=2k+1)$, $(2k+1=n)$).
So $(m+k\ge n)$, hence
$$
X_{k+1}=\min(n, m+k)=n.
$$
But the strategy queries $(q_{k+1}=n)$. Therefore $(q_{k+1}=X_{k+1})$, and you succeed by time $(k+1)$.
Combining both cases, this strategy guarantees success within
$$
k+1=\left\lfloor \frac{n}{2}\right\rfloor+1
$$
trials.

2) Why you cannot guarantee success in $(k=\left\lfloor \frac{n}{2}\right\rfloor)$ (or fewer) trials
Now assume you are allowed at most $(k)$ trials (where $(k=\lfloor n/2\rfloor)$). We prove: no strategy (even adaptive) can guarantee success for every initial state.
Key observation: if you have not succeeded before time $(t)$, then all replies so far are $0$. Under this problem’s stopping rule, that means the transcript before success is always the same (all zeros), so adaptivity does not actually help: up to time $(k)$, your strategy will produce some definite query sequence $(q_1,\dots,q_k)$.
Fix any such sequence $(q_1,\dots,q_k)$. For an initial state $m$, a hit at time $t\le k$ requires
$$
q_t=\min(n, m+t-1).
$$
We now focus on a set of $(k+1)$ possible initial states:
$$
m\in\{1,2,\dots,k+1\}.
$$
For these $(m)$, and for times $t\le k$, the cap at $n$ never matters, because
$$
m+t-1\le (k+1)+k-1=2k\le n
$$
(the last inequality holds because $2\lfloor n/2\rfloor\le n$).
So for these $(m)$ we simply have
$$
X_t=m+t-1.
$$
Thus, for a fixed time $t$, the condition “hit occurs at time $t$” becomes
$$
q_t=m+t-1
\quad\Longleftrightarrow\quad
m=q_t-t+1.
$$
Crucially, for each time $t$, the equation
$$
m=q_t-t+1
$$
identifies at most one initial state $m$. So across $(k)$ trials, the total number of initial states in $\{1,\dots,k+1\}$ that can possibly be hit by time $k$ is at most $k$ (one per trial).
But there are $(k+1)$ candidate initial states. By the pigeonhole principle, there exists at least one
$$
m_0\in\{1,2,\dots,k+1\}
$$
such that for every $t=1,\dots,k$,
$$
m_0\ne q_t-t+1,
$$
equivalently,
$$
q_t\ne m_0+t-1.
$$
For that initial state $m_0$, none of the first $k$ queries hits the target. Therefore, no strategy can guarantee success in $k$ (or fewer) trials.
So the minimum guaranteed number of trials satisfies
$$
T(n)\ge k+1=\left\lfloor \frac{n}{2}\right\rfloor+1.
$$

Final conclusion
We have shown:

A strategy succeeds within
$$\left\lfloor \frac{n}{2}\right\rfloor+1$$
trials (upper bound), and
Fewer than that cannot guarantee success (lower bound).

Hence,
$$
T(n)=\left\lfloor \frac{n}{2}\right\rfloor+1.
$$

## 答案
$$\lfloor n/2 \rfloor + 1$$

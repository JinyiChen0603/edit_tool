---
id: 308
title: Lattice Scan Length Counting
question_type: 数学
domain: 高中数学竞赛组合
difficulty: 中学
knowledge_point: 格点线段平移计数
batch: 01_第一批100题
teacher: zhuyoupeng
---

## 题目
In the discrete space region $ \Omega = \{(x, y, z) \mid x, y, z \in \{1, 2, \dots, 12\}\}$, the "scan length" of a line segment is defined as the total number of lattice points it contains. If a line segment has a scan length of exactly 9 and its direction vector $\vec{d} = (d_1, d_2, d_3)$ satisfies $|d_1| = |d_2| = |d_3| = 1$, find the total number of such line segments in $ \Omega$.

## 解答
Solution:
 1 Feature Extraction: The absolute values of the components of the direction vector are all 1, which implies that the angles between the line segment and the coordinate axes are equal, belonging to the four main diagonal directions in space. Since $|d_1|=|d_2|=|d_3|=1$, every unit step changes all three coordinates by 1 simultaneously.
 2 Displacement Constraints: Let the starting point of the line segment be $P_0(x_0, y_0, z_0)$. After passing through 9 lattice points, the ending point is $P_8(x_0+8d_1, y_0+8d_2, z_0+8d_3)$.
 3 Boundary Determination: * To ensure the number of points is exactly 9, the following must be satisfied: the line segment cannot extend in the negative direction from $P_0$ (i.e., $P_{-1}$ is out of bounds) and cannot extend in the positive direction from $P_8$ (i.e., $P_9$ is out of bounds).
 ◦ Taking $ \vec{d} = (1, 1, 1) $ as an example. The out-of-bounds condition implies:
 ▪ $ \min(x_0, y_0, z_0) = 1 $ (ensuring that $P_{-1}$ has a coordinate of 0, falling outside $\{1..12\}$).
 ▪ $ \max(x_0+8, y_0+8, z_0+8) = 12 \Rightarrow \max(x_0, y_0, z_0) = 4 $.
 4 Start Point Distribution Calculation: The coordinates $(x_0, y_0, z_0)$ of the starting points satisfying the conditions are all within the range $\{1, 2, 3, 4\}$, and must contain the minimum value 1 and the maximum value 4.
 Use the exclusion method to calculate the number of such combinations:
 ◦ Total combinations: $4^3 = 64$.
 ◦ Combinations without 1 (selected from $\{2,3,4\}$): $3^3 = 27$.
 ◦ Combinations without 4 (selected from $\{1,2,3\}$): $3^3 = 27$.
 ◦ Combinations containing neither 1 nor 4 (selected from $\{2,3\}$): $2^3 = 8$. Number in a single direction: $64 - (27 + 27 - 8) = 18$.
 5 Total Summary: There are 4 independent diagonal directions in space, so the total number is $18 \times 4 = 72$.

## 答案
72
